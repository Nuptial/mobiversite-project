# Mobiversite E-commerce Platform

A modern, full-stack e-commerce application built with Next.js 15 and JSON Server. This monorepo provides a complete shopping experience with product browsing, cart management, wishlist functionality, and order tracking.

## ğŸ“‹ Table of Contents

- [Overview](#overview)
- [Tech Stack](#tech-stack)
- [Features](#features)
- [Project Structure](#project-structure)
- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Configuration](#configuration)
- [Running the Project](#running-the-project)
- [Default User Credentials](#default-user-credentials)
- [API Endpoints](#api-endpoints)
- [Project Architecture](#project-architecture)
- [Development Guidelines](#development-guidelines)
- [Testing](#testing)
- [Deployment](#deployment)

## ğŸ¯ Overview

Mobiversite is a full-featured e-commerce platform that demonstrates modern web development practices. The application is built as a monorepo containing:

- **Web Application** (`apps/web`): Next.js 15 application with App Router
- **API Server** (`apps/api`): JSON Server with authentication middleware

### Key Highlights

- âœ… **JavaScript & JSX Only**: Pure JavaScript implementation (no TypeScript)
- âœ… **Server-Side Rendering**: Next.js 15 App Router for optimal performance
- âœ… **Responsive Design**: Mobile-first approach with Tailwind CSS
- âœ… **Authentication**: JWT-based authentication with secure cookie handling
- âœ… **State Management**: React Context API for cart and wishlist
- âœ… **Real-time Updates**: Toast notifications for user actions
- âœ… **Accessibility**: ARIA labels and keyboard navigation support

## ğŸ›  Tech Stack

### Frontend

- **Framework**: Next.js 15 (App Router)
- **UI Library**: React 18.3
- **Styling**: Tailwind CSS 3.4
- **Icons**: Lucide React
- **State Management**: React Context API
- **Notifications**: React Hot Toast
- **Carousel**: Embla Carousel
- **UI Components**: Radix UI, CVA (Class Variance Authority)

### Backend

- **API Server**: JSON Server 0.17
- **Authentication**: JSON Server Auth 2.1
- **Password Hashing**: bcryptjs 2.4
- **CORS**: Enabled for cross-origin requests

### Development Tools

- **Package Manager**: npm
- **Monorepo**: npm workspaces
- **Testing**: Vitest
- **Build Tool**: Next.js built-in bundler

## âœ¨ Features

### User Features

- ğŸ” **Authentication**: Login and registration with JWT tokens
- ğŸ›ï¸ **Product Browsing**: Browse products with pagination and search
- ğŸ›’ **Shopping Cart**: Add/remove items, update quantities with real-time updates
- â¤ï¸ **Wishlist**: Save favorite products for later
- ğŸ“¦ **Order Management**: View order history with detailed item information
- ğŸ“± **Responsive Design**: Optimized for mobile, tablet, and desktop
- ğŸ”” **Toast Notifications**: Real-time feedback for user actions
- â™¿ **Accessibility**: Full keyboard navigation and screen reader support

### Developer Features

- ğŸ“ **Monorepo Structure**: Organized codebase with shared dependencies
- ğŸ¨ **Component Library**: Reusable UI components
- ğŸ§ª **Testing**: Unit tests for core functionality
- ğŸ”’ **Type Safety**: JSX-only enforcement with build-time checks
- ğŸš€ **Performance**: Server-side rendering and optimized loading states

## ğŸ“ Project Structure

```
mobiversite/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ api/                    # JSON Server API
â”‚   â”‚   â”œâ”€â”€ db.json            # Database file (generated by seed)
â”‚   â”‚   â”œâ”€â”€ server.js          # API server configuration
â”‚   â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”‚   â””â”€â”€ seed.js        # Database seeding script
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ web/                    # Next.js Web Application
â”‚       â”œâ”€â”€ app/                # Next.js App Router
â”‚       â”‚   â”œâ”€â”€ (public)/      # Public routes
â”‚       â”‚   â”‚   â”œâ”€â”€ page.jsx   # Homepage
â”‚       â”‚   â”‚   â”œâ”€â”€ products/  # Product pages
â”‚       â”‚   â”‚   â”œâ”€â”€ cart/      # Cart page
â”‚       â”‚   â”‚   â”œâ”€â”€ login/     # Login page
â”‚       â”‚   â”‚   â””â”€â”€ register/  # Registration page
â”‚       â”‚   â”œâ”€â”€ (protected)/   # Protected routes
â”‚       â”‚   â”‚   â”œâ”€â”€ profile/   # Profile/Orders page
â”‚       â”‚   â”‚   â””â”€â”€ wishlist/  # Wishlist page
â”‚       â”‚   â”œâ”€â”€ api/           # API routes
â”‚       â”‚   â”‚   â”œâ”€â”€ login/     # Login endpoint
â”‚       â”‚   â”‚   â”œâ”€â”€ register/  # Registration endpoint
â”‚       â”‚   â”‚   â”œâ”€â”€ orders/    # Orders endpoint
â”‚       â”‚   â”‚   â””â”€â”€ auth/      # Auth endpoints
â”‚       â”‚   â””â”€â”€ layout.jsx     # Root layout
â”‚       â”œâ”€â”€ components/         # React components
â”‚       â”œâ”€â”€ context/           # React Context providers
â”‚       â”œâ”€â”€ lib/               # Utility functions
â”‚       â”œâ”€â”€ middleware.js      # Next.js middleware
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ package.json               # Root package.json
â””â”€â”€ README.md                  # This file
```

## ğŸ“¦ Prerequisites

Before you begin, ensure you have the following installed:

- **Node.js**: v18.x or higher
- **npm**: v9.x or higher (comes with Node.js)
- **Git**: For version control

## ğŸš€ Installation

### 1. Clone the Repository

```bash
git clone <repository-url>
cd mobiversite
```

### 2. Install Dependencies

```bash
npm install
```

This will install all dependencies for both the web and API applications using npm workspaces.

### 3. Seed the Database

```bash
npm run seed
```

This command will:

- Fetch products from FakeStore API
- Create a default user account
- Generate `apps/api/db.json` with initial data

### 4. Configure Environment Variables (Optional)

The application works with default values, so environment files are **optional** for local development. You only need to create them if you want to customize the configuration.

#### API Server (Optional)

Create `apps/api/.env` if you need to customize the API port:

```env
PORT=4000
```

**Default**: `4000`

#### Web Application (Optional)

Create `apps/web/.env.local` if you need to customize the API URL or JWT secret:

```env
NEXT_PUBLIC_API_URL=http://localhost:4000
UI_JWT_SECRET=your-secret-key-here
```

**Defaults**:

- `NEXT_PUBLIC_API_URL`: `http://localhost:4000`
- `UI_JWT_SECRET`: `dev-ui-secret` (development only)

**Note**: The application will use these defaults if environment files are not provided.

## âš™ï¸ Configuration

### Default Configuration

The application uses the following default values:

- **API Server**: `http://localhost:4000`
- **Web Application**: `http://localhost:3000`
- **UI JWT Secret**: `dev-ui-secret` (development only)

### Environment Variables

#### API Server (`apps/api/.env`)

| Variable | Default | Description     |
| -------- | ------- | --------------- |
| `PORT`   | `4000`  | API server port |

#### Web Application (`apps/web/.env.local`)

| Variable              | Default                 | Description              |
| --------------------- | ----------------------- | ------------------------ |
| `NEXT_PUBLIC_API_URL` | `http://localhost:4000` | API server URL           |
| `UI_JWT_SECRET`       | `dev-ui-secret`         | JWT secret for UI tokens |

## ğŸƒ Running the Project

### Development Mode

Run both API and Web applications simultaneously:

```bash
npm run dev
```

This will start:

- **API Server**: http://localhost:4000
- **Web Application**: http://localhost:3000

### Running Individual Services

#### API Server Only

```bash
npm run dev:api
```

#### Web Application Only

```bash
npm run dev:web
```

### Production Build

#### Build Web Application

```bash
npm --prefix apps/web run build
```

#### Start Production Server

```bash
npm --prefix apps/web run start
```

## ğŸ”‘ Default User Credentials

After seeding the database, you can login with the following credentials:

| Field        | Value                 |
| ------------ | --------------------- |
| **Email**    | `demo@mobiversite.io` |
| **Password** | `123456`              |

### Creating New Users

You can create new user accounts by:

1. Visiting the registration page at `/register`
2. Filling in your email and password
3. Logging in with your new credentials

## ğŸ”Œ API Endpoints

### Authentication Endpoints

#### Login

```
POST /login
Content-Type: application/json

{
  "email": "demo@mobiversite.io",
  "password": "123456"
}
```

#### Register

```
POST /register
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}
```

### Product Endpoints

#### Get All Products

```
GET /products
```

#### Get Product by ID

```
GET /products/:id
```

### Order Endpoints

#### Get User Orders

```
GET /orders?userId=:userId
Authorization: Bearer <token>
```

#### Create Order

```
POST /orders
Authorization: Bearer <token>
Content-Type: application/json

{
  "userId": 1,
  "items": [...],
  "total": 99.99,
  "status": "paid",
  "date": "2024-01-01T00:00:00.000Z"
}
```

### User Endpoints

#### Get User Profile

```
GET /users/:id
Authorization: Bearer <token>
```

## ğŸ—ï¸ Project Architecture

### Frontend Architecture

#### App Router Structure

- **Public Routes** (`app/(public)/`): Accessible to all users
- **Protected Routes** (`app/(protected)/`): Require authentication
- **API Routes** (`app/api/`): Next.js API endpoints

#### State Management

- **CartContext**: Manages shopping cart state (localStorage)
- **WishlistContext**: Manages wishlist state (localStorage)
- **Server State**: Fetched data using Next.js server components

#### Authentication Flow

1. User submits login credentials
2. Next.js API route forwards request to JSON Server
3. JSON Server validates credentials and returns JWT token
4. Next.js API route sets secure HTTP-only cookies
5. Middleware validates tokens on protected routes

### Backend Architecture

#### JSON Server

- **Database**: `db.json` (file-based database)
- **Authentication**: `json-server-auth` middleware
- **CORS**: Enabled for cross-origin requests
- **Password Hashing**: bcryptjs with salt rounds

#### Database Schema

```json
{
  "products": [
    {
      "id": 1,
      "title": "Product Title",
      "price": 99.99,
      "image": "https://...",
      "description": "..."
    }
  ],
  "users": [
    {
      "id": 1,
      "email": "demo@mobiversite.io",
      "password": "$2a$10$...",
      "name": "Demo User",
      "wishlist": []
    }
  ],
  "orders": [
    {
      "id": 1,
      "userId": 1,
      "items": [...],
      "total": 99.99,
      "status": "paid",
      "date": "2024-01-01T00:00:00.000Z"
    }
  ]
}
```

## ğŸ’» Development Guidelines

### Code Style

#### JavaScript & JSX Only

- This project uses **JavaScript and JSX only** (no TypeScript)
- All files must use `.js` or `.jsx` extensions
- TypeScript files (`.ts`, `.tsx`) are blocked by build scripts

#### Component Structure

- Use functional components with hooks
- Prefer `const` over `function` declarations
- Use descriptive variable and function names
- Event handlers should be prefixed with `handle` (e.g., `handleClick`)

#### Styling

- Use Tailwind CSS utility classes
- Prefer `className` over inline styles
- Use `clsx` or `cn` utility for conditional classes
- Follow mobile-first responsive design

#### Accessibility

- Include `aria-label` attributes for interactive elements
- Use semantic HTML elements
- Ensure keyboard navigation works
- Add `role` attributes where appropriate

### File Naming Conventions

- **Components**: PascalCase (e.g., `ProductCard.jsx`)
- **Utilities**: camelCase (e.g., `formatDate.js`)
- **Pages**: lowercase with hyphens (e.g., `product-detail.jsx`)
- **Context**: PascalCase with Context suffix (e.g., `CartContext.jsx`)

### Component Guidelines

#### Server Components (Default)

- Use for data fetching
- No client-side interactivity
- Can import server-only modules

#### Client Components (`'use client'`)

- Use for interactivity (hooks, event handlers)
- Use for browser APIs (localStorage, window)
- Must be explicitly marked with `'use client'`

### Best Practices

1. **Error Handling**: Always handle errors gracefully
2. **Loading States**: Show loading indicators during async operations
3. **Validation**: Validate user input on both client and server
4. **Security**: Never expose sensitive data in client components
5. **Performance**: Use React.memo and useMemo for expensive computations
6. **Accessibility**: Test with keyboard navigation and screen readers

## ğŸ§ª Testing

### Running Tests

```bash
npm test
```

### Test Structure

Tests are located in `apps/web/__tests__/`:

- `cart.reducers.test.js`: Cart functionality tests
- `currency.test.js`: Currency formatting tests
- `flow.test.js`: Navigation flow tests

### Writing Tests

- Use Vitest as the test runner
- Write unit tests for utility functions
- Write integration tests for API routes
- Test accessibility with keyboard navigation

## ğŸš¢ Deployment

### Environment Setup

#### Production Environment Variables

```env
NEXT_PUBLIC_API_URL=https://api.yourdomain.com
UI_JWT_SECRET=your-production-secret-key
NODE_ENV=production
```

#### API Server

1. Deploy JSON Server to a Node.js hosting service
2. Ensure `db.json` is persisted (use a database in production)
3. Configure CORS for your domain
4. Set up environment variables

#### Web Application

1. Build the Next.js application:

   ```bash
   npm --prefix apps/web run build
   ```

2. Deploy to Vercel, Netlify, or your preferred hosting service
3. Configure environment variables in your hosting platform
4. Set up custom domain and SSL certificate

### Production Considerations

- **Database**: Replace `db.json` with a production database (PostgreSQL, MongoDB)
- **Authentication**: Use secure JWT secrets and rotate regularly
- **CORS**: Configure CORS for your production domain
- **HTTPS**: Always use HTTPS in production
- **Monitoring**: Set up error monitoring and logging
- **Backup**: Implement regular database backups

## ğŸ“ Additional Notes

### JavaScript & JSX Only Policy

This project enforces JavaScript and JSX only:

- **Build Script**: `apps/web/scripts/ban-tsx.js` blocks TypeScript files
- **Next.js Config**: `pageExtensions: ['js', 'jsx']` restricts file types
- **Linting**: Configure ESLint to flag TypeScript usage

### Data Seeding

The seed script (`apps/api/scripts/seed.js`):

- Fetches products from FakeStore API
- Creates a default user with hashed password
- Generates `db.json` with initial data
- Run `npm run seed` to regenerate the database

### Local Storage

The application uses browser localStorage for:

- **Cart**: Persistent shopping cart across sessions
- **Wishlist**: Saved wishlist items

**Note**: Data is stored client-side and is not synchronized across devices.

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## ğŸ“„ License

This project is private and proprietary.

## ğŸ†˜ Support

For support, please open an issue in the repository or contact the development team.

---

**Built with â¤ï¸ using Next.js 15 and JSON Server**
